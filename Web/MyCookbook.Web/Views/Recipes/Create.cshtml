@using MyCookbook.Web.ViewModels.Recipes.InputModels
@using MyCookbook.Data.Models.Enums
@model RecipeCreateInputModel

@{
    var categories = Model.Categories.Select(x => new SelectListItem(x.Name, x.Id.ToString()));
    var cuisines = Model.Cuisines.Select(x => new SelectListItem(x.Name, x.Id.ToString()));
    this.ViewData["Title"] = "Добавяне на рецепта";
}
<form asp-action="Create" method="post" enctype="multipart/form-data">
    <div class="row">
        <div class="col-md-5">
            <div class="form-group">
                <label asp-for="Title"></label>
                <i class="fas fa-info-circle" data-toggle="tooltip" data-placement="right" title="Заглавие на рецептата"></i>
                <input asp-for="Title" class="form-control" />
                <span asp-validation-for="Title" class="text-danger"></span>
            </div>
            <div class="row">
                <div class="form-group col-md-6">
                    <label asp-for="CategoryId"></label>
                    <select asp-for="CategoryId" asp-items="categories" class="form-control"></select>
                    <span asp-validation-for="CategoryId" class="text-danger"></span>
                </div>
                <div class="form-group col-md-6">
                    <label asp-for="CuisineId"></label>
                    <select asp-for="CuisineId" asp-items="cuisines" class="form-control"></select>
                    <span asp-validation-for="CuisineId" class="text-danger"></span>
                </div>
            </div>
            <div class="row">
                <div class="form-group col-md-6">
                    <label asp-for="SeasonalType"></label>
                    <select asp-for="SeasonalType" asp-items="@Html.GetEnumSelectList<Seasonal>()" class="form-control"></select>
                    <span asp-validation-for="SeasonalType" class="text-danger"></span>
                </div>
                <div class="form-group col-md-6">
                    <label asp-for="SkillLevel"></label>
                    <select asp-for="SkillLevel" asp-items="@Html.GetEnumSelectList<SkillLevel>()" class="form-control"></select>
                    <span asp-validation-for="SkillLevel" class="text-danger"></span>
                </div>
            </div>
            <div class="row">
                <div class="form-group col-md-5">
                    <label asp-for="PrepTime"></label>
                    <input asp-for="PrepTime" class="form-control" />
                    <span asp-validation-for="PrepTime" class="text-danger"></span>
                </div>
                <div class="form-group col-md-4">
                    <label asp-for="CookTime"></label>
                    <input asp-for="CookTime" class="form-control" />
                    <span asp-validation-for="CookTime" class="text-danger"></span>
                </div>
                <div class="form-group col-md-3">
                    <label asp-for="Servings"></label>
                    <input asp-for="Servings" class="form-control" />
                    <span asp-validation-for="Servings" class="text-danger"></span>
                </div>
            </div>
            <div class="custom-file">
                <input asp-for="TitleImage" class="custom-file-input" />
                <label asp-for="TitleImage" class="custom-file-label">
                    <span class="badge badge-light">
                        <i class="fas fa-cloud-upload-alt fa-2x"></i>
                    </span>
                    <span>
                        Качи заглавна снимка
                    </span>
                </label>
            </div>
        </div>
        <div class="col-md-7">
            <div class="form-group">
                <label asp-for="IngredientsNames"></label>
                <textarea asp-for="IngredientsNames" class="form-control" rows="8"></textarea>
                <span asp-validation-for="IngredientsNames" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Description"></label>
                <textarea asp-for="Description" class="form-control" rows="12"></textarea>
                <span asp-validation-for="Description" class="text-danger"></span>
            </div>
        </div>
    </div>
    <hr />
    <div>
        <input type="submit" value="Качване" class="btn btn-primary" />
    </div>
    <span class="d-inline-block arrow" title="Disabled tooltip">
        <button class="btn btn-primary" style="pointer-events: none;" type="button" disabled>Disabled button</button>
    </span>
</form>

@*@using MyCookbook.Web.ViewModels.Recipes.InputModels
    @model TestInputModel
    <form class="col-md-4" asp-action="Create" method="post" id="chktech">
        <ul id="checkBox">
            @for (var i = 0; i < Model.CookingMethods.Length; i++)
            {
                <li>
                    <input type="checkbox" asp-for="@Model.CookingMethods[i].Selected" />
                    <label asp-for="@Model.CookingMethods[i].Selected">@Model.CookingMethods[i].Name</label>
                    <input type="hidden" asp-for="@Model.CookingMethods[i].Id" />
                    <input type="hidden" asp-for="@Model.CookingMethods[i].Name" />
                    <span asp-validation-for="@Model.CookingMethods[i].Name"></span>
                </li>
            }
        </ul>
        <span asp-validation-for="CookingMethods"></span>
        <button type="submit" id="btnSubmit">Filtrer</button>
    </form>*@

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script type="text/javascript">
        var isPushedButton = false;
        $(document).ready(function () {
            $('#btnSubmit').click(function () {
                if ($('#chktech input:checked').length > 0) {
                    return true;
                }
                else {
                    if (isPushedButton == false) {
                        document.getElementById("checkBox").innerHTML += "Моля изберете поне един метод на приготвяне!";
                    }
                    isPushedButton = true;
                    return false;
                }
            })
        });
    </script>
    <script>
        // Add the following code if you want the name of the file appear on select
        $(".custom-file-input").on("change", function () {
            var fileName = $(this).val().split("\\").pop();
            $(this).siblings(".custom-file-label").addClass("selected").html(fileName);
        });
    </script>
    <script>
        $(document).ready(function () {
            $('[data-toggle="tooltip"]').tooltip();
        });
    </script>
}